login:
  dingtalk_enabled:
    default: false
    client: true
    description: "启用钉钉OAuth2.0登录 / Enable DingTalk OAuth2.0 login"

  dingtalk_client_id:
    default: ""
    regex: "^[a-zA-Z0-9_-]+$"
    description: "钉钉应用Client ID / DingTalk App Client ID"

  dingtalk_client_secret:
    default: ""
    secret: true
    description: "钉钉应用Client Secret / DingTalk App Client Secret"

  dingtalk_authorize_url:
    default: "https://login.dingtalk.com/oauth2/auth"
    description: "钉钉OAuth授权端点 / DingTalk OAuth authorization endpoint"

  dingtalk_token_url:
    default: "https://api.dingtalk.com/v1.0/oauth2/userAccessToken"
    description: "钉钉Token获取端点 / DingTalk token endpoint"

  dingtalk_user_info_url:
    default: "https://api.dingtalk.com/v1.0/contact/users/me"
    description: "钉钉用户信息端点 / DingTalk user info endpoint"

  dingtalk_scope:
    default: "openid"
    description: "OAuth授权范围 / OAuth authorization scope"

  dingtalk_button_title:
    default: "with DingTalk"
    locale_default:
      zh_CN: "使用钉钉登录"
      en: "with DingTalk"
    description: "登录按钮显示文本 / Login button text"

  dingtalk_authorize_signup:
    default: true
    client: true
    description: "允许钉钉用户自动注册（独立于全局'Allow new registrations'设置,启用后钉钉用户可直接登录无需经过注册页面）/ Allow automatic signup via DingTalk (independent of global 'Allow new registrations' setting, users are logged in directly without signup page)"

  dingtalk_overrides_email:
    default: false
    description: "允许钉钉覆盖本地邮箱 / Allow DingTalk to override local email"

  dingtalk_debug_auth:
    default: false
    hidden: true
    description: "启用OAuth调试日志 / Enable OAuth debug logging"

  dingtalk_allow_virtual_email:
    default: true
    client: true
    type: bool
    description: "允许使用虚拟邮箱注册（钉钉无邮箱用户可注册）/ Allow virtual email for registration (users without email can register)"

  dingtalk_virtual_email_domain:
    default: "virtual.local"
    regex: "^[a-zA-Z0-9][a-zA-Z0-9.-]*[a-zA-Z0-9]$"
    description: "虚拟邮箱域名后缀 / Virtual email domain suffix"

  dingtalk_mobile_email_domain:
    default: "dingtalk.mobile"
    regex: "^[a-zA-Z0-9][a-zA-Z0-9.-]*[a-zA-Z0-9]$"
    description: "手机号虚拟邮箱域名后缀 / Mobile number virtual email domain suffix"

  dingtalk_username_template:
    default: "dingtalk_{hash6}"
    regex: "^[a-z0-9_\\-{\\}\u4e00-\u9fff]+$"
    description: "用户名生成模板。支持变量：{name}=姓名（经过清洗）, {姓名}=钉钉真实姓名, {hash6}=UnionID的6位hash, {hash8}=8位hash, {unionid}=UnionID前16位。Discourse会自动处理重名（追加数字） / Username generation template. Variables: {name}=name (sanitized), {姓名}=DingTalk real name, {hash6}=6-char hash, {hash8}=8-char hash, {unionid}=first 16 chars of UnionID. Discourse auto-handles duplicates"

  dingtalk_auto_fill_user_name:
    default: true
    client: true
    type: bool
    description: "关联钉钉时自动填充用户全名（仅当用户全名为空时）/ Auto-fill user name from DingTalk when associating (only if user name is empty)"

  dingtalk_track_organizations:
    default: true
    client: true
    type: bool
    description: "记录用户的企业关联关系（多组织支持）/ Track user-organization associations (multi-organization support)"

  dingtalk_allowed_corp_ids:
    default: ""
    type: list
    list_type: compact
    description: "允许登录的企业ID白名单（留空=允许所有，多个用|分隔）/ Allowed corp IDs whitelist (empty = allow all, separate multiple with |)"

  dingtalk_blocked_corp_ids:
    default: ""
    type: list
    list_type: compact
    description: "禁止登录的企业ID黑名单（多个用|分隔）/ Blocked corp IDs blacklist (separate multiple with |)"
